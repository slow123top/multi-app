<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>验证前端生成文字图片  canvas画图  生成base64</title>
  </head>
  <body>
    <div class="left"></div>
    <!-- <iframe src="file:///E:/AAAAAlastWork/code/js/hy-ui/index.html" frameborder="0">
      
    </iframe> -->
    <script>
      function createCanvas() {
        var cvs = document.createElement("canvas");
        cvs.setAttribute("height", 300);
        cvs.setAttribute("width", 300);
        let ctx = cvs.getContext("2d");
        ctx.beginPath();
        ctx.arc(150, 150, 150, 0, 2 * Math.PI, false);
        ctx.fillStyle = "green";
        ctx.fill();
        ctx.font = "150px Arial";
        ctx.textBaseline = "middle";
        ctx.textAlign = "center";
        ctx.fillStyle = "#fff";
        ctx.fillText("奇", 150, 152);
        ctx.strokeStyle="green";
        ctx.stroke();
        return cvs.toDataURL('image/png',0.2);
      }
      // createCanvas();
      function convertCanvasToImage(base64) {
        var image = new Image();
        // 图片跨域处理
        image.setAttribute("crossorigin", "anonymous");
        image.src = base64;
        // image.width = 300;
        // image.height = 300;
        return image;
      }
      var con = document.getElementsByClassName("left")[0];
      con.appendChild(convertCanvasToImage(createCanvas()));
      // var pre = new Date().getTime();
      // for (var i = 0; i < 10; i++) {
      //   createCanvas();
      // }
      // var current = new Date().getTime();
      // console.log(current - pre);
    </script>
    <script src="./ui.js"></script>
  </body>
</html>
